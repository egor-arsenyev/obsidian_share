
**NAT** – Network Address Translation – «преобразование сетевых адресов» – это механизм в сетях [[TCP_IP|TCP/IP]], позволяющий преобразовывать [[IP-адрес|IP-адреса]] и [[Порт|порты]] транзитных пакетов между разными сетевыми сегментами. Он позволяет устройствам в локальной сети с приватными (недоступными из интернета) IP-адресами взаимодействовать с интернетом через один или несколько публичных IP-адресов.

![[Pasted image 20250329195900.png]]
#### Зачем нужен NAT?

1. **Экономия [[IP-адрес#IPv4 «Классический» адрес из 4 чисел|IPv4-адресов]]**: Из-за ограниченного количества IPv4-адресов NAT позволяет множеству устройств использовать один публичный IP для выхода в интернет.
2. **Безопасность**: Скрывает внутреннюю структуру сети, так как внешние устройства видят только публичный IP роутера.
3. **Гибкость**: Упрощает изменение внутренней сети без необходимости перенастройки публичных адресов. 
#### Как работает NAT?

1. **Локальный запрос**: Устройство в локальной сети (например, с IP `192.168.1.10`) отправляет запрос на внешний сервер.
2. **Подмена адреса**: Роутер заменяет приватный IP устройства на свой публичный IP (например, `89.123.45.67`) и запоминает соответствие (IP + порт источника).
3. **Ответ из интернета**: Когда сервер отвечает на публичный IP роутера, тот по сохраненным данным перенаправляет ответ на нужное устройство в локальной сети.

#### Типы NAT

[[Статический NAT]]

[[Динамический NAT]]

[[Перегруженный-Маскарадный NAT]]

#### Пример работы NAT

![[Pasted image 20250329200131.png]]

#### Преимущества NAT:

- Экономия публичных IPv4-адресов.
- Повышение безопасности за счет маскировки внутренних устройств.
- Упрощение управления сетью (например, смена провайдера без перенастройки локальных IP).

#### Недостатки NAT:

- **Сложности для некоторых приложений**: Например, P2P-соединения (торренты), VoIP (Skype), онлайн-игры могут требовать дополнительной настройки ([[Проброс портов]]).
- **Нагрузка на роутер**: Необходимость отслеживать все активные соединения и преобразовывать адреса в реальном времени.
- **Ограничение прямых подключений**: Устройства извне не могут напрямую обратиться к хосту в локальной сети без проброса портов.

#### NAT и [[IP-адрес#IPv6 «Длинный» адрес из 16-ричных чисел|IPv6]]:

С распространением IPv6 (где адресов достаточно для каждого устройства) необходимость в NAT уменьшается. Однако технология всё ещё актуальна из-за повсеместного использования IPv4 и дополнительных функций безопасности.