## Что такое база данных временных рядов?

БД временных рядов, исходя из названия, представляют собой системы баз данных, специально предназначенные для обработки информации, связанной со временем.

В основном все имеют дело с реляционными базами данных ([MySQL](https://ru.wikipedia.org/wiki/MySQL) или [SQL Server](https://ru.wikipedia.org/wiki/Microsoft_SQL_Server)). Возможно, вы также имели дело с базами данных [NoSQL](https://ru.wikipedia.org/wiki/NoSQL) ([MongoDB](https://ru.wikipedia.org/wiki/MongoDB) или [DynamoDB](https://ru.wikipedia.org/wiki/DynamoDB)). Все они основаны на том, что у вас есть таблицы. Эти таблицы содержат столбцы и строки, каждая из которых определяет запись в вашей таблице. Часто эти таблицы специально предназначены для определённой цели. Одна может быть предназначена для хранения пользователей, другая — для фотографий или видео. Такие системы эффективны, масштабируемы и используются множеством гигантских компаний с миллионами запросов на своих серверах.

Базы данных временных рядов работают иначе. Данные по-прежнему хранятся в «коллекциях», но эти коллекции имеют общий знаменатель: они объединены со временем. Это означает, что для каждой точки, которую вы можете сохранить, у вас есть связанная с ней временная метка.

![[Pasted image 20250406161409.png]]

Возникает вопрос: нельзя ли использовать реляционную базу данных и просто включить в неё столбец с именем «время»? Например, в Oracle есть тип данных TIMESTAMP, который можно было бы использовать для этой цели. Конечно, такое возможно, но это неэффективно.

## Зачем нужны базы данных временных рядов?

Три слова: быстрый приём данных.

Системы баз данных временных рядов построены так, чтобы быстро и эффективно принимать данные. Реляционные базы данных тоже имеют большую скорость загрузки данных (от 20 000 до 100 000 строк в секунду). Тем не менее, приём не постоянен во времени. У реляционных баз данных есть один ключевой аспект, который делает их медленными при росте данных — индексы.

При добавлении новых записей в реляционную БД и при наличии в таблице индексов СУБД будет многократно переиндексировать данные для быстрого и эффективного доступа к ним. Как следствие, производительность со временем снижается. При этом увеличивается нагрузка, что приводит к трудностям при чтении данных.

База данных временных рядов оптимизирована для быстрого приёма данных. Такие системы используют индексацию данных, объединённых со временем. Как следствие, скорость загрузки не уменьшается со временем и остается достаточно стабильной (от 50 до 100 тыс. строк в секунду на одном узле).

![[Pasted image 20250406161427.png]]

## Специфичные концепции баз данных временных рядов

Кроме высокой скорости приёма, базы данных временных рядов вводят специфичные для этих технологий концепции.

Одной из них является организация хранения данных. В традиционной РБД данные хранятся до тех пор, пока вы не решите их удалить. Учитывая сценарии использования БД временных рядов, вы можете не хранить ваши данные слишком долго: это или слишком дорого, или данные со временем теряют актуальность.

Системы вроде InfluxDB могут позаботиться об удалении данных через определённое время, используя концепцию, называемую политикой хранения. Вы также можете выполнять непрерывные запросы к оперативным данным для выполнения определённых операций. В реляционной БД можно найти эквивалентные операции (например «задания» в SQL), которые могут выполняться по заданному расписанию.

### Совершенно другая экосистема

Особенности БД временных рядов хорошо видны, когда речь заходит об их экосистемах. Как правило, реляционные базы данных окружены приложениями, которые подключаются к ним для получения информации или добавления новых записей.

Часто база данных ассоциируется с одной системой. Клиенты подключаются к веб-сайту, который обращается к базе данных для получения информации. БД временных рядов созданы под множество клиентов (программ). Здесь нет простого сервера, обращающегося к БД, но есть куча разных сенсоров (к примеру), выполняющих вставку данных одновременно.

Как следствие, её инструменты были разработаны для того, чтобы предоставить эффективные способы потребления или производства данных.

### Потребление данных

Потребление данных часто осуществляется с помощью инструментов мониторинга вроде [[Grafana]] или [Chronograf](https://www.influxdata.com/time-series-platform/chronograf/). Эти клиенты имеют встроенные решения для визуализации данных и даже для создания пользовательских предупреждений.

![[Pasted image 20250406161449.png]]

Эти инструменты часто используются для создания живых панелей мониторинга, которые могут быть представлены графиками, гистограммами, датчиками или картами окружающего мира.

### Производство данных

Производство данных осуществляется агентами, которые нацеливаются на специальные элементы в инфраструктуре и извлекают из них метрики. Такие агенты называются «агентами мониторинга». Вы можете легко настроить их для запроса данных за определённый промежуток времени. Примерами являются [[Telegraf]] (который является официальным агентом мониторинга), [CollectD](https://collectd.org/) или [StatsD](https://github.com/statsd/statsd).

![[Pasted image 20250406161513.png]]

Теперь вы лучше понимаете, что такое базы данных временных рядов и чем они отличаются от реляционных. Пришло время углубиться в конкретные концепции [[InfluxDB]].