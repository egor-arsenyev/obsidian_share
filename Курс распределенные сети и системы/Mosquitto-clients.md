**Mosquitto-clients** — это набор утилит командной строки, входящих в состав проекта [Eclipse Mosquitto](https://mosquitto.org/), который представляет собой открытый [[MQTT]]-брокер. Эти инструменты предназначены для взаимодействия с MQTT-брокерами, позволяя публиковать сообщения, подписываться на топики и тестировать MQTT-инфраструктуру. MQTT (Message Queuing Telemetry Transport) — это легкий протокол обмена сообщениями, широко используемый в IoT (Internet of Things) и других системах с ограниченными ресурсами.

---

### Основные утилиты в составе Mosquitto-clients:
1. **mosquitto_pub**  
   Используется для публикации сообщений в MQTT-топик.  
   **Пример:**  
   ```bash
   mosquitto_pub -h broker.example.com -t "sensors/temperature" -m "25" -q 1
   ```
   - `-h` — адрес брокера (по умолчанию: localhost).  
   - `-t` — название топика.  
   - `-m` — сообщение для отправки.  
   - `-q` — уровень QoS (0, 1 или 2).  
   - Другие опции: `-p` (порт), `-u` (логин), `-P` (пароль), `--tls-version` (безопасное соединение).

2. **mosquitto_sub**  
   Позволяет подписаться на топики и получать сообщения от брокера.  
   **Пример:**  
   ```bash
   mosquitto_sub -h broker.example.com -t "sensors/#" -v -q 1
   ```
   - `-v` — выводить топик и сообщение.  
   - `-q` — уровень QoS.  
   - `-T` — исключить определенные топики.  
   - Поддерживает шаблоны: `+` (один уровень), `#` (все подуровни).

3. **mosquitto_rr** (Request-Response)  
   Утилита для паттерна "запрос-ответ": отправляет сообщение в топик и ожидает ответа в другом.  
   **Пример:**  
   ```bash
   mosquitto_rr -h broker.example.com -t request -e response -m "ping"
   ```

---

### Ключевые функции и возможности:
- **Поддержка QoS** (Quality of Service):  
  - **QoS 0** — доставка не гарантируется.  
  - **QoS 1** — доставка минимум один раз.  
  - **QoS 2** — гарантированная доставка ровно один раз.

- **Безопасность**:  
  - TLS/SSL-шифрование (`--cafile`, `--cert`, `--key`).  
  - Аутентификация через логин/пароль (`-u`, `-P`).  
  - Поддержка клиентских сертификатов.

- **Сохраняемые сессии**:  
  Флаг `-c` (clean session) позволяет сохранять подписки и неподтвержденные сообщения после отключения.

- **Файлы конфигурации**:  
  Можно задавать параметры через файл (например, `mosquitto_sub -c config.conf`).

- **Отладка**:  
  Опция `-d` выводит детальную информацию о соединении.

---

### Примеры использования:
1. **Публикация сообщения с аутентификацией**:  
   ```bash
   mosquitto_pub -h mqtt.eclipse.org -t "test/topic" -m "Hello MQTT" -u username -P password
   ```

2. **Подписка на все топики в группе "sensors"**:  
   ```bash
   mosquitto_sub -h localhost -t "sensors/+" -q 2
   ```

3. **Безопасное соединение с TLS**:  
   ```bash
   mosquitto_sub -h broker.example.com -p 8883 --tls-version tlsv1.2 --cafile ca.crt -t "secure/data"
   ```

---

### Дополнительные утилиты:
- **mosquitto_passwd**: Создание и управление файлами паролей для аутентификации на брокере.  
- **mosquitto**: Сам MQTT-брокер (не входит в клиентский пакет, устанавливается отдельно).

---

### Установка:
- **Debian/Ubuntu**:  
  ```bash
  sudo apt-get install mosquitto-clients
  ```
- **macOS (Homebrew)**:  
  ```bash
  brew install mosquitto
  ```

---

**Итог:** Mosquitto-clients — это мощный инструмент для тестирования, отладки и работы с MQTT-брокерами. Он особенно полезен разработчикам IoT, позволяя быстро проверять взаимодействие между устройствами и серверами.