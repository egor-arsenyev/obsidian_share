**InfluxDB** -  [[База данных временных рядов|база данных временных рядов]], разработанная InfluxData, в последние время  демонстрирует всё большую популярность. Она оптимизирована для быстрого приёма, хранения и анализа данных, которые изменяются во времени, таких как метрики серверов, показания датчиков IoT, события приложений и другие временные данные.

![[influx_scheme.png]]
### **Ключевые особенности**

1. **Временные ряды в основе**  
   Данные хранятся в формате:  
   `Измерение (measurement) + Теги (tags) + Поля (fields) + Временная метка (timestamp)`.  
   Например:  
   `temperature, device=sensor1 value=25.6 1625097600000000000`   ^92348e
   - **Теги** — метаданные для индексации (например, `device=sensor1`).  
   - **Поля** — сами значения (например, `value=25.6`).  
   - **Временная метка** — точное время записи (наносекундная точность).

2. **Высокая производительность**  
   - Может обрабатывать **миллионы записей в секунду** благодаря эффективной структуре хранения (TSM — Time-Structured Merge Tree).  
   - Оптимизирована для **записи** и **агрегации временных данных**.

3. **Языки запросов**  

- **Flux**  
  Мощный язык для обработки данных (доступен в InfluxDB 2.0+). Поддерживает фильтрацию, агрегацию, джойны, математические операции.  
  Пример запроса среднего значения температуры за час:  
  ```flux
  from(bucket: "iot_data")
    |> range(start: -1h)
    |> filter(fn: (r) => r._measurement == "temperature")
    |> mean()
  ```
- **InfluxQL**  
  SQL-подобный синтаксис (используется в InfluxDB 1.x). Пример:  
  ```sql
  SELECT MEAN("value") FROM "temperature" WHERE time > now() - 1h GROUP BY time(1m)
  ```

4. **Гибкость хранения**  
   - Поддерживает **ретеншн-политики** (автоматическое удаление старых данных).  
   - **Шардирование** данных для горизонтального масштабирования (в Enterprise-версии).

5. **Интеграции**  
   - Совместима с **[[Telegraf]]** (агент для сбора данных), **[[Grafana]]** (визуализация), **Kapacitor** (обработка в реальном времени).  
   - Поддерживает протоколы: **HTTP API**, **Prometheus remote write**, **[[MQTT]]**, **Graphite** и другие.

### **Архитектура**

- **Базы данных (Buckets в InfluxDB 2.0+)** — в InfluxDB 2.0+ заменяет понятие «база данных». Это контейнер для данных с настройкой retention policy (политики хранения).  ^ec7b87
- **Организации (Organizations)** — логическая группа пользователей, бакетов и задач. Позволяет изолировать данные для разных команд или проектов..  
- Политика хранения (Retention Policy) — определяет, как долго хранятся данные (например, удалять данные старше 7 дней). Настраивается для каждого бакета.  
- **Задачи (Tasks)** — автоматизация обработки данных (например, агрегация каждые 5 минут).

### **Примеры использования**

1. **Мониторинг инфраструктуры**  
   Сбор метрик CPU, памяти, сети с серверов через Telegraf → хранение в InfluxDB → визуализация в Grafana.

2. **IoT-системы**  
   Анализ данных с датчиков температуры, влажности, GPS в реальном времени.

3. **Финансовые данные**  
   Трекинг котировок акций, объемов торгов, прогнозирование с использованием ML-моделей.

4. **Аналитика приложений**  
   Логирование событий пользователей (клики, сессии, ошибки) и построение дашбордов.

### **Преимущества**

- **Эффективное сжатие** данных (экономия места на диске).  
- **Простота настройки** (в сравнении с реляционными БД для временных рядов).  
- **Горизонтальное масштабирование** (в Enterprise-версии).  
- **Богатая экосистема** (интеграции с популярными DevOps-инструментами).

### **Ограничения**

- Не подходит для **транзакционных данных** (например, банковских операций).  
- Сложные JOIN-операции не поддерживаются (в отличие от реляционных баз).  
- Бесплатная версия (OSS) имеет ограничения на кластеризацию.

### **Стек TICK**

InfluxDB — часть экосистемы InfluxData:  
- **[[Telegraf]]** (сбор данных),  
- **I**nfluxDB (хранение),  
- **C**hronograf/[[Grafana]] (визуализация),  
- **K**apacitor (обработка в реальном времени).

### **Документация**

- Официальная документация: [docs.influxdata.com/influxdb](https://docs.influxdata.com/influxdb/)  
- Примеры использования: [awesome.influxdata.com](https://awesome.influxdata.com/)

